{"remainingRequest":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\src\\pages\\exam\\exam.vue?vue&type=style&index=0&id=8b9d6a8a&rel=stylesheet%2Fscss&lang=scss&scoped=true","dependencies":[{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\src\\pages\\exam\\exam.vue","mtime":1675932130000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\BaiduNetdiskDownload\\0417jiaxiao\\springboot7e8wi\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50b3AtY29udGVudCB7CiAgaGVpZ2h0OiA4MHB4OwogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICM0MDlFRkY7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KLnRvcC1jb250ZW50LWxlZnQsIC50b3AtY29udGVudC1jZW50ZXIsIC50b3AtY29udGVudC1yaWdodCB7CiAgZm9udC1zaXplOiAxOHB4OwogIGxpbmUtaGVpZ2h0OiA4MHB4OwogIGNvbG9yOiAjZmZmOwp9Ci50b3AtY29udGVudC1sZWZ0IHsKICBwYWRkaW5nLWxlZnQ6IDIwcHg7Cn0KLnRvcC1jb250ZW50LXJpZ2h0IHsKICBwYWRkaW5nLXJpZ2h0OiAyMHB4Owp9Ci5xdWVzdGlvbi1jb250ZW50IHsKICB3aWR0aDogOTAlOwogIG1hcmdpbjogMCBhdXRvOwogIGhlaWdodDogMjAwcHg7CiAgbWFyZ2luLXRvcDogMzBweDsKfQoucXVlc3Rpb24tdGl0bGUsIC5xdWVzdGlvbi1hbnN3ZXIsIC5xdWVzdGlvbi1idG4gewogIHBhZGRpbmc6IDIwcHggMDsKfQo="},{"version":3,"sources":["exam.vue"],"names":[],"mappings":";AA2NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exam.vue","sourceRoot":"src/pages/exam","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"top-content\">\r\n      <div class=\"top-content-left\" v-if=\"questionList.length > 0\">当前第 <el-tag type=\"danger\">{{curQuesIndex + 1}}</el-tag> 道题。未答题目：<el-tag type=\"danger\">{{questionList.length - curQuesIndex - 1}}</el-tag> 道，总题目：<el-tag type=\"danger\">{{questionList.length}}</el-tag> 道。</div>\r\n      <div class=\"top-content-left\" v-else>当前卷子没有题目。未答题目：<el-tag type=\"danger\">0</el-tag> 道，总题目：<el-tag type=\"danger\">0</el-tag> 道。</div>\r\n      <div class=\"top-content-center\" v-cloak>距离驾校考试结束还有 <el-tag type=\"danger\">{{this.hour}}</el-tag> 时 <el-tag type=\"danger\">{{this.minute}}</el-tag> 分 <el-tag type=\"danger\">{{this.second}}</el-tag> 秒</div>\r\n      <div class=\"top-content-right\">\r\n        <el-button type=\"danger\" @click=\"doneExam(0)\">结束驾校考试</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"question-content\" v-for=\"(item, index) in questionList\" :key=\"item.id\" v-show=\"curQuesIndex == index\">\r\n      <div class=\"question-title\">\r\n        题目 ({{questionType(item)}}) ({{item.score}}分)：{{item.questionname}}\r\n      </div>\r\n      <div class=\"question-answer\">\r\n        <div v-show=\"!isSubmit && !end\">\r\n          作答：\r\n          <el-select v-model=\"examrecord.myanswer\" placeholder=\"请选择您的答案\" v-if=\"item.type == 0 || item.type == 2\">\r\n            <el-option\r\n              v-for=\"(option, idx) in JSON.parse(item.options)\"\r\n              :key=\"idx\"\r\n              :label=\"option.text\"\r\n              :value=\"option.code\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-select v-model=\"myanswer\" multiple placeholder=\"请选择您的答案\" v-if=\"item.type == 1\">\r\n            <el-option\r\n              v-for=\"(option, idx) in JSON.parse(item.options)\"\r\n              :key=\"idx\"\r\n              :label=\"option.text\"\r\n              :value=\"option.code\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-input style=\"width: 400px;\" v-if=\"item.type == 3\" v-model=\"examrecord.myanswer\" placeholder=\"请输入答案\"></el-input>\r\n        </div>\r\n        <div v-show=\"isSubmit && !end\">\r\n          <div class=\"question-title\">填写答案： {{question.type == 1 ? myanswer.join(',') : examrecord.myanswer}}</div>\r\n          <div v-if=\"question.answer == examrecord.myanswer\" class=\"question-title\"><el-tag type=\"success\">正确</el-tag> 解析：{{question.answer}}, {{question.analysis}}</div>\r\n          <div v-if=\"question.answer != examrecord.myanswer\" class=\"question-title\"><el-tag type=\"danger\">错误</el-tag> 解析：{{question.answer}}, {{question.analysis}}</div>\r\n        </div>\r\n        <div v-show=\"end\">\r\n          <div class=\"question-title\">驾校考试成绩：<el-tag type=\"danger\">{{totalScore}}</el-tag> 分</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"question-btn\">\r\n        <el-button v-show=\"!isSubmit && !end\" type=\"primary\" @click=\"submitAnswer\">提交答案</el-button>\r\n        <el-button v-show=\"isSubmit && !end\" type=\"success\" @click=\"nextQuestion\">下一题</el-button>\r\n        <el-button v-show=\"end\" type=\"success\" @click=\"doneExam(1)\">结束驾校考试</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    //数据集合\r\n    data() {\r\n      return {\r\n        questionList: [],\r\n        curQuesIndex: 0,\r\n        question: {},\r\n        examrecord: {\r\n          analysis: '',\r\n          answer: '',\r\n          myanswer: '',\r\n          myscore: '',\r\n          options: '',\r\n          paperid: '',\r\n          papername: '',\r\n          questionid: '',\r\n          questionname: '',\r\n          score: '',\r\n          userid: localStorage.getItem('userid'),\r\n          username: localStorage.getItem('username')\r\n        },\r\n        myanswer: [],\r\n        totalScore: 0,\r\n        isSubmit: false,\r\n        end: false,\r\n        maxtime: 0,\r\n        timer: null,\r\n        hour: '',\r\n        minute: '',\r\n        second: '',\r\n        user: {}\r\n      }\r\n    },\r\n    created() {\r\n      this.maxtime = this.$route.query.time * 60;\r\n      this.deleteRecords(this.$route.query.id);\r\n      this.getQuestion(this.$route.query.id);\r\n      this.hour = Math.floor(this.maxtime / 60 / 60);\r\n      this.minute = Math.floor(this.maxtime / 60 % 60);\r\n      this.second = Math.floor(this.maxtime % 60);\r\n      this.timer = setInterval(this.countDown, 1000);\r\n      this.$http.get(localStorage.getItem('UserTableName') + '/session', {emulateJSON: true}).then(res => {\r\n        if (res.data.code == 0) {\r\n          this.user = res.data.data;\r\n        }\r\n      });\r\n    },\r\n    //方法集合\r\n    methods: {\r\n      questionType(item) {\r\n        switch (item.type) {\r\n          case 0:\r\n            return '单选题';\r\n          case 1:\r\n            return '多选题';\r\n          case 2:\r\n            return '判断题';\r\n          case 3:\r\n            return '填空题';\r\n        }\r\n      },\r\n      nextQuestion() {\r\n        this.isSubmit = false;\r\n        this.examrecord.myanswer = '';\r\n        if (this.curQuesIndex >= this.questionList.length -1) {\r\n          this.end = true;\r\n          return;\r\n        }\r\n        this.curQuesIndex++;\r\n        this.question = this.questionList[this.curQuesIndex];\r\n      },\r\n      deleteRecords(paperid) {\r\n        this.$http.post(`examrecord/deleteRecords?userid=${localStorage.getItem('userid')}&paperid=${paperid}`).then(res => {});\r\n      },\r\n      getQuestion(paperid) {\r\n        this.$http.get('examquestion/list', {params: {page: 1, limit: 1000, sort: 'sequence', paperid}}).then(res => {\r\n          if (res.data.code == 0) {\r\n            this.questionList = res.data.data.list;\r\n            if (res.data.data.list.length > 0) {\r\n              this.question = res.data.data.list[0];\r\n            }\r\n          }\r\n        });\r\n      },\r\n      submitAnswer() {\r\n        this.examrecord.myanswer = this.question.type == 1 ? this.myanswer.sort().join(',') : this.examrecord.myanswer;\r\n        this.examrecord.analysis = this.question.analysis;\r\n        this.examrecord.answer = this.question.answer;\r\n        this.examrecord.myscore = this.examrecord.myanswer == this.question.answer ? this.question.score : 0;\r\n        this.examrecord.options = this.question.options;\r\n        this.examrecord.paperid = this.question.paperid;\r\n        this.examrecord.papername = this.question.papername;\r\n        this.examrecord.questionid = this.question.id;\r\n        this.examrecord.questionname = this.question.questionname;\r\n        this.examrecord.score = this.question.score;\r\n        this.totalScore = parseFloat(this.totalScore) + parseFloat(this.examrecord.myscore);\r\n        this.$http.post('examrecord/add', this.examrecord).then(res => {\r\n          if (res.data.code == 0 && this.questionList.length > this.curQuesIndex) {\r\n            this.isSubmit = true;\r\n          } else {\r\n            this.$message.error(res.data.msg);\r\n          }\r\n        });\r\n      },\r\n      doneExam(type) {\r\n        if (type == 0) {\r\n          this.$confirm('确定离开驾校考试?未答题目按0分计', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            this.end = true;\r\n            if (this.questionList.length == 0) {\r\n              this.$router.push('/index/examPaper');\r\n            }\r\n          });\r\n        } else {\r\n          this.$router.push('/index/examPaper');\r\n        }\r\n      },\r\n      countDown() {\r\n        if (this.maxtime > 0) {\r\n          this.hour = Math.floor((this.maxtime - 1) / 60 / 60);\r\n          this.minute = Math.floor((this.maxtime - 1) / 60 % 60);\r\n          this.second = Math.floor((this.maxtime - 1) % 60);\r\n          --this.maxtime;\r\n        } else {\r\n          clearInterval(this.timer);\r\n          this.end = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n  .top-content {\r\n    height: 80px;\r\n    width: 100%;\r\n    background-color: #409EFF;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .top-content-left, .top-content-center, .top-content-right {\r\n    font-size: 18px;\r\n    line-height: 80px;\r\n    color: #fff;\r\n  }\r\n  .top-content-left {\r\n    padding-left: 20px;\r\n  }\r\n  .top-content-right {\r\n    padding-right: 20px;\r\n  }\r\n  .question-content {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    height: 200px;\r\n    margin-top: 30px;\r\n  }\r\n  .question-title, .question-answer, .question-btn {\r\n    padding: 20px 0;\r\n  }\r\n</style>\r\n"]}]}